<!--
  @description       : this component contains the questions of the test
  @author            : Rudransh Shukla
  @group             : 
  @last modified on  : 04-04-2024
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
  <div class="main">
    <div class="header">
      <div class="timer">
        <h1>Test timer - {timerDisplay}</h1>
      </div>

      <div class="buttons">
        <div lwc:if={showObjective}>
          <lightning-button variant="brand" label="Next" onclick={handleNext}></lightning-button>
        </div>
        <div lwc:elseif={showSubjective}>
          <lightning-button variant="success" label="Submit" onclick={handleNext}></lightning-button>
        </div>
      </div>
    </div>
    <template lwc:if={showObjective}>
      <template if:true={emptyObjective}>
        <div class="empty-list">
          <h1>No questions for this Type</h1>
        </div>
      </template>
      <template if:false={emptyObjective}>
        <template for:each={objectiveList} for:item="question" for:index="index">
          <div key={question.Id} class="question-component" data-value={index}>
            <div class="question-name">
              <h1> {question.Question_Name__c}</h1>
            </div>
            <template for:each={question.Options__r} for:item="option">
              <div key={option.Id} class="option-component">
                <p>
                  <input type="radio" name={question.Id} value={option.Answers__c}
                    onchange={handleObjectiveOptionChange} data-id={question.Id}></input>
                </p>
                <p>{option.Answers__c}</p>
              </div>
            </template>
          </div>
        </template>
      </template>
    </template>
    <template lwc:elseif={showSubjective}>
      <template if:true={emptySubjective}>
        <div class="empty-list">
          <h1>No questions for this Type</h1>
        </div>
      </template>
      <template if:false={emptySubjective}>
        <template for:each={subjectiveList} for:item="question">
          <div key={question.Id} class="question-component">
            <div class="question-name">
              <h1> {question.Question_Name__c}</h1>
            </div>
            <lightning-input-rich-text disabled-categories="INSERT_CONTENT" value={myVal}
              onchange={handleSubjectiveChange} data-id={question.Id}></lightning-input-rich-text>
          </div>
        </template>
      </template>
    </template>
  </div>

  <template lwc:if={showWarningModal}>
    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
      <div class="slds-modal__container">
        <header class="slds-modal__header">
          <h2 class="slds-modal__title"> WARNING</h2>
          <lightning-button-icon icon-name="utility:close" onclick={closeModal} alternative-text="Close"
            class="slds-modal__close"></lightning-button-icon>
        </header>
        <div class="slds-modal__content slds-p-around_medium" style="text-align: center">
          <h1>You cannot go back and edit your responses if you click next!!</h1>
        </div>
        <footer class="slds-modal__footer">
          <div style="text-align: right;">
            <lightning-button variant="destructive" label="Close" onclick={closeModal}
              style="padding-right: 1%"></lightning-button>
            <template lwc:if={showObjective}>
              <lightning-button variant="brand" type="submit" label="Next"
                onclick={handleNextSubjective}></lightning-button>
            </template>
            <template lwc:elseif={showSubjective}>
              <lightning-button variant="brand" type="submit" label="Submit"
                onclick={handleSubjectiveNext}></lightning-button>
            </template>
          </div>
        </footer>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>
</template>